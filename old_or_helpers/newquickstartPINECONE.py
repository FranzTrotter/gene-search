# Import the Pinecone library
from pinecone import Pinecone

# Initialize a Pinecone client with your API key
pc = Pinecone(api_key="pcsk_yMcSm_2J4YaTKzpspLY9ub1T9KW1FvqBLk7LybLvEWfQq921xGwnA8Ld7cQBbPxcYdQBK")

# Create a dense index with integrated embedding
index_name = "dense-index"
if not pc.has_index(index_name):
    pc.create_index_for_model(
        name=index_name,
        cloud="aws",
        region="us-east-1",
        embed={
            "model":"llama-text-embed-v2",
            "field_map":{"text": "chunk_text"}
        }
    )

records = [
  {
    "_id": "a-mannosidosis",
    "chunk_text": "Clinical characteristics The clinical phenotype of alpha-mannosidosis varies considerably, with a wide spectrum of clinical findings and broad variability in individual presentation. At least three clinical types have been suggested in untreated individuals: mild (clinically recognized after age ten years, with myopathy, slow progression, and absence of skeletal abnormalities); moderate (clinically recognized before age ten years, with myopathy, slow progression, and presence of skeletal abnormalities); and severe (obvious progression leading to early death from primary central nervous system involvement or infection). Core features of untreated individuals generally include early childhood-onset non-progressive hearing loss, frequent infections due to immunodeficiency, rheumatologic symptoms (especially systemic lupus erythematosus), developmental delay / intellectual disability, low tone, ataxia, spastic paraplegia, psychiatric findings, bone disease (ranging from asymptomatic osteopenia to focal lytic or sclerotic lesions and osteonecrosis), gastrointestinal dysfunction (including diarrhea, swallowing issues/ aspiration, and enlarged liver and spleen), poor growth, eye issues (including tapetoretinal degeneration and optic nerve atrophy), cardiac complications in adults, and pulmonary issues (including parenchymal lung disease). However, with the advent of enzyme replacement therapy, the natural history of this condition may change. Long-term velmanase alfa (VA) treatment outcomes are still being elucidated, but may include improvement in hearing, immunologic profile, and quality of life (improved clinical outcomes for muscle strength). Similarly, affected individuals who underwent hematopoietic stem cell transplantation (HSCT) experienced improvement in development (with preservation of previously learned skills), ability to participate in activities of daily living, stabilization or improvement in skeletal abnormalities, and improvement in hearing ability, although expressive speech and hearing deficiencies remained the most significant clinical problems after HSCT. Author Affiliations: 1 The Children's Hospital of Philadelphia; Division of Human Genetics and Metabolism, Perelman School of Medicine at the University of Pennsylvania, Philadelphia, Pennsylvania; Email: ficicioglu@chop.edu. 2 Mark Holland Metabolic Unit, Salford Royal NHS Foundation Trust, Salford Care Organisation, Part of the Northern Care Alliance NHS Group, Salford, United Kingdom; Email: karolina.stepien@nca.nhs.uk. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. Diagnosis/testing GeneReviews The diagnosis of alpha-mannosidosis is established in a proband by identification of deficiency of lysosomal enzyme acid alpha-mannosidase (typically 5%-10% of normal activity) in leukocytes or other nucleated cells AND/OR by the identification of biallelic pathogenic variants in MAN2B1 by molecular genetic testing. Management Targeted therapies: Velmanase alfa (Lamzede) enzyme replacement therapy (ERT) has been very well tolerated and is now regarded as a standard treatment for alpha-mannosidosis; improvement in both biochemical and functional parameters have been reported in treated individuals. Hematopoietic stem cell transplantation (HSCT) has been offered as a treatment for severe alpha-mannosidosis. While HSCT carries risks, the data suggests it is a feasible therapeutic option for alpha-mannosidosis, with better outcomes achieved by performing it early before complications arise, balancing the risks and benefits."
  },
  {
    "_id": "a-thal",
    "chunk_text": "Clinical characteristics Alpha-thalassemia (-thalassemia) has two clinically significant forms: hemoglobin Bart hydrops fetalis (Hb Bart) syndrome (caused by deletion/inactivation of all four alpha globin [-globin] genes; --/--), and hemoglobin H (HbH) disease (most frequently caused by deletion/inactivation of three -globin genes;--/-). Hb Bart syndrome, the more severe form, is characterized by prenatal onset of generalized edema and pleural and pericardial effusions as a result of congestive heart failure induced by severe anemia. Extramedullary erythropoiesis, marked hepatosplenomegaly, and a massive placenta are common. Death usually occurs in the neonatal period. HbH disease has a broad phenotypic spectrum: although clinical features usually develop in the first years of life, HbH disease may not present until adulthood or may be diagnosed only during routine hematologic analysis in an asymptomatic individual. The majority of individuals have enlargement of the spleen (and less commonly of the liver), mild jaundice, and sometimes thalassemia-like bone changes. Individuals with HbH disease may develop gallstones and experience acute episodes of hemolysis in response to infections or exposure to oxidant drugs. Diagnosis/testing The diagnosis of Hb Bart syndrome is established in a fetus with characteristic hematologic and hemoglobin (Hb) findings and molecular genetic testing that identifies biallelic pathogenic variants in both HBA1 and HBA2 that result in deletion or inactivation of all four -globin alleles. The diagnosis of HbH disease is established in a proband with hematologic and Hb findings and molecular genetic testing that identifies biallelic pathogenic variants in HBA1 and HBA2 that result in deletion or inactivation of three -globin alleles. Author Affiliations: 1 Hematology-Oncology Department, Schneider Children's Medical Center of Israel, Petah Tiqva, Israel; Email: htamary@tauex.tau.ac.il. 2 Felsenstein Medical Research Center, Petah Tiqva, Israel; Email: odgani@clalit.org.il. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. Management GeneReviews Treatment of manifestations: Hb Bart syndrome: intrauterine blood transfusions, improved transfusion strategies, and rarely curative hematopoietic stem cell transplant may allow survival of children. HbH disease: while most individuals are clinically well and survive without any treatment, occasional red blood cell transfusions may be needed during hemolytic or aplastic crises. Red blood cell transfusions are very rarely needed for severe anemia affecting cardiac function and erythroid expansion that results in severe bone changes and extramedullary erythropoiesis. In contrast, persons with non-deletional HbH disease may be more severely affected and transfusion dependent. Prevention of primary manifestations: Because of the severity of Hb Bart syndrome, the occasional presence of congenital anomalies, and the risk for maternal complications, prenatal testing and early termination of pregnancies at risk have usually been considered. However, recent advances in intrauterine and postnatal therapy have increased treatment options, thus complicating the ethical issues for health care providers and families facing an affected pregnancy. Prevention of secondary complications: Monitor individuals with HbH disease for hemolytic/aplastic crisis during febrile episodes; in those who require chronic red blood cell transfusions, iron chelation therapy should be instituted; for those who are not red blood cell transfusion dependent, iron chelation with deferasirox can be considered to reduce liver iron concentration."
  },
  {
    "_id": "aadc-def",
    "chunk_text": "Clinical characteristics Individuals with aromatic L-amino acid decarboxylase (AADC) deficiency typically have complex symptoms, including motor, behavioral, cognitive, and autonomic findings. Symptom onset is in early infancy, typically within the first six months of life. The most common initial symptoms are often nonspecific, and include feeding difficulties, hypotonia, and developmental delay. More specific symptoms include oculogyric crises (which occur in the vast majority of affected individuals, typically starting in infancy), movement disorders (especially dystonia), and autonomic dysfunction (excessive sweating, temperature instability, ptosis, nasal congestion, hypoglycemic episodes). Sleep disturbance is present in a majority of affected individuals and can include insomnia, hypersomnia, or both. Mood disturbance, including irritability and anxiety, are also common. Brain MRI is typically either normal or may demonstrate nonspecific abnormalities, such as mild diffuse cerebral atrophy or delayed myelination. Seizures are an uncommon finding, occurring in fewer than 5% of affected individuals. Diagnosis/testing The diagnosis of AADC deficiency is established in a proband who has the following core diagnostic testing results: biallelic pathogenic variants in DDC identified by molecular genetic testing OR cerebrospinal fluid (CSF) or plasma neurotransmitter profile consistent with AADC deficiency AND significantly reduced AADC enzyme activity in plasma. Author Affiliations: 1 Division of Metabolism, University Children's Hospital Zurich, Zurich, Switzerland; Email: nenad.blau@kispi.uzh.ch. 2 Departments of Pediatrics and Neurology, Nationwide Children's Hospital; Ohio State University College of Medicine, Columbus, Ohio; Email: toni.pearson@nationwidechildrens.org. 3 Developmental Neurosciences, Zayed Centre for Research into Rare Disease in Children, UCL GOS Institute of Child Health; Department of Neurology, Great Ormond Street Hospital, London, United Kingdom; Email: manju.kurian@ucl.ac.uk. 4 Department. of Molecular & Human Genetics Baylor College of Medicine, Houston, Texas; Email: sarah.elsea@bcm.edu. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. Management GeneReviews Targeted therapies: Treatments can include the use of dopamine agonists (pramipexole, ropinirole, rotigotine patch, or bromocriptine), MAO inhibitors (selegiline or tranylcypromine), vitamin B6 (pyridoxine, pyridoxal phosphate), folinic acid, and (in rare cases) levodopa in a preparation without carbidopa. Putaminal delivery of eladocagene exuparvovec (Upstaza) was approved in the European Union and United Kingdom for the treatment of individuals aged 18 months and older with a clinical, molecular, and genetically confirmed diagnosis of AADC deficiency with a severe phenotype (i.e., individuals who cannot sit, stand, or walk); this treatment is not currently FDA approved for use in the United States. Supportive care: Feeding therapy with consideration of gastrostomy tube placement or jejunal feeding; anticholinergic drugs and/or sleep induction for movement disorders / oculogyric crisis; xylometazoline or oxymetazoline nasal drops for autonomic dysfunction; melatonin or clonidine for sleep disturbance; and standard therapies for epilepsy, developmental delay / intellectual disability, musculoskeletal issues, bowel dysfunction (constipation, diarrhea, or gastroesophageal reflux disease), strabismus, visual impairment, obstructive sleep apnea, hypoglycemia, and hearing loss."
  },
  {
    "_id": "ab-lipo-p",
    "chunk_text": "Clinical characteristics Abetalipoproteinemia typically presents in infancy with failure to thrive, diarrhea, vomiting, and malabsorption of fat. Hematologic manifestations may include acanthocytosis (irregularly spiculated erythrocytes), anemia, reticulocytosis, and hemolysis with resultant hyperbilirubinemia. Malabsorption of fat-soluble vitamins (A, D, E, and K) can result in an increased international normalized ratio (INR). Untreated individuals may develop atypical pigmentation of the retina that may present with progressive loss of night vision and/or color vision in adulthood. Neuromuscular findings in untreated individuals including progressive loss of deep tendon reflexes, vibratory sense, and proprioception; muscle weakness; dysarthria; and ataxia typically manifest in the first or second decades of life. Diagnosis/testing The diagnosis of abetalipoproteinemia is established in a proband with absent or extremely low LDL-cholesterol, triglyceride, and apolipoprotein (apo) B levels and biallelic pathogenic variants in MTTP identified by molecular genetic testing. Management Treatment of manifestations: Adequate caloric intake to alleviate growth deficiency; low-fat diet (10%-20% of total calories from fat); oral essential fatty acid supplementation (up to 1 teaspoon per day of oils rich in polyunsaturated fatty acids, as tolerated); supplementation with vitamin A (100-400 IU/kg/day), vitamin D (800-1,200 IU/day), vitamin E (100-300 IU/kg/day), and vitamin K (5-35 mg/week). Mild anemia rarely requires treatment, although occasionally vitamin B12 or iron therapy may be considered. Dysarthria, ataxia, and hypothyroidism are treated in the standard fashion. Author Affiliations: 1 Department of Clinical Biochemistry, Royal Perth Hospital & Fiona Stanley Hospital Network PathWest Laboratory Medicine WA; School of Medicine, Faculty of Health & Medical Sciences University of Western Australia, Perth, Australia; Email: john.burnett@health.wa.gov.au; Email: amanda.hooper@health.wa.gov.au. 2 Departments of Medicine and Biochemistry, Schulich School of Medicine and Robarts Research Institute, Western University, London, Ontario, Canada; Email: hegele@robarts.ca. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. GeneReviews Prevention of primary manifestations: Most complications can be prevented through institution of a low-fat diet with supplementation of fat-soluble vitamins (A, D, E, and K). Surveillance: Assessment of growth parameters at each visit. Complete blood count, INR, reticulocyte count, liver function tests (AST, ALT, GGT, total and direct bilirubin, alkaline phosphatase, and albumin), fat-soluble vitamin levels (vitamin A [retinol], 25-OH vitamin D, and plasma or red blood cell vitamin E concentrations), serum calcium, serum phosphate, serum uric acid, and TSH levels annually. Lipid profile (total cholesterol, triglyceride concentration, LDL-cholesterol, HDL-cholesterol, apo B, and apo A-I) every several years. Ultrasound of the liver every three years. Ophthalmology and neurology evaluations every six to 12 months. Agents/circumstances to avoid: Fatty foods, particularly those rich in long-chain fatty acids. Evaluation of relatives at risk: Sibs of a proband should undergo a full lipid profile and apolipoprotein (apo) B determination to allow for early diagnosis and treatment of findings. If the pathogenic MTTP variants in the family are known, molecular genetic testing may also be used to determine the genetic status of at-risk sibs."
  },
  {
    "_id": "abs",
    "chunk_text": "Clinical characteristics Cytochrome P450 oxidoreductase deficiency (PORD) is a disorder of steroidogenesis with a broad phenotypic spectrum including cortisol deficiency, altered sex steroid synthesis, disorders of sex development (DSD), and skeletal malformations of the Antley-Bixler syndrome (ABS) phenotype. Cortisol deficiency is usually partial, with some baseline cortisol production but failure to mount an adequate cortisol response in stress. Mild mineralocorticoid excess can be present and causes arterial hypertension, usually presenting in young adulthood. Manifestations of altered sex steroid synthesis include ambiguous genitalia/DSD in both males and females, large ovarian cysts in females, poor masculinization and delayed puberty in males, and maternal virilization during pregnancy with an affected fetus. Skeletal malformations can manifest as craniosynostosis, mid-face retrusion with proptosis and choanal stenosis or atresia, low-set dysplastic ears with stenotic external auditory canals, hydrocephalus, radiohumeral synostosis, neonatal fractures, congenital bowing of the long bones, joint contractures, arachnodactyly, and clubfeet; other anomalies observed include urinary tract anomalies (renal pelvic dilatation, vesicoureteral reflux). Cognitive impairment is of minor concern and likely associated with the severity of malformations; studies of developmental outcomes are lacking. Diagnosis/testing The diagnosis of PORD can be established by urinary steroid profiling using gas chromatography / mass spectrometry (GC/MS), which documents combined impairment of 17-hydroxylase (CYP17A1) and 21- hydroxylase (CYP21A2) enzymatic activity located at key branch points of cortisol, aldosterone, and sex steroid synthesis. Identification of biallelic POR pathogenic variants on molecular genetic testing confirms the diagnosis. Molecular genetic testing is desirable for all individuals affected by PORD to confirm the diagnosis, but is mandatory if clinical and laboratory features are inconclusive. Author Affiliations: 1 Institute of Metabolism and Systems Research, University of Birmingham, Birmingham, United Kingdom; Email: j.idkowiak@bham.ac.uk; Email: w.arlt@bham.ac.uk. 2 University of Tampa, Tampa, Florida; Email: deborahcragun@gmail.com. 3 Clinical Geneticist, Children's Hospital Medical Center and University of Cincinnati College of Medicine, Cincinnati, Ohio; Email: rob.hopkin@cchmc.org. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. Management GeneReviews Treatment of manifestations: Glucocorticoid replacement therapy for cortisol deficiency including stress-dose cover in intercurrent illness; surgery as needed for craniosynostosis, hypospadias, and cryptorchidism in males and clitoromegaly and vaginal hypoplasia in females; dihydrotestosterone treatment has been successful in some males with micropenis; testosterone replacement in males in whom testosterone levels remain relatively low after onset of puberty; females with absent pubertal development may require estrogen replacement therapy; treatment with estradiol to reduce the size of ovarian cysts; endotracheal intubation, nasal stints or tracheotomy, and tracheostomy as needed; physical and occupational therapy for joint contractures and help with fine and gross motor skills. Prevention of secondary complications: Supplementation with appropriate steroid hormones in individuals who are deficient has helped alleviate adrenal crisis, lack of or poor pubertal development in males and females, sleepiness, and fatigue."
  },
  {
    "_id": "achm",
    "chunk_text": "Clinical characteristics Achromatopsia is characterized by reduced visual acuity, pendular nystagmus, increased sensitivity to light (photophobia), a small central scotoma, eccentric fixation, and reduced or complete loss of color discrimination. All individuals with achromatopsia (achromats) have impaired color discrimination along all three axes of color vision corresponding to the three cone classes: the protan or long-wavelength-sensitive cone axis (red), the deutan or middle-wavelength-sensitive cone axis (green), and the tritan or short-wavelength-sensitive cone axis (blue). Most individuals have complete achromatopsia, with total lack of function of all three types of cones. Rarely, individuals have incomplete achromatopsia, in which one or more cone types may be partially functioning. The manifestations are similar to those of individuals with complete achromatopsia, but generally less severe. Hyperopia is common in achromatopsia. Nystagmus develops during the first few weeks after birth followed by increased sensitivity to bright light. Best visual acuity varies with severity of the disease; it is 20/200 or less in complete achromatopsia and may be as high as 20/80 in incomplete achromatopsia. Visual acuity is usually stable over time; both nystagmus and sensitivity to bright light may improve slightly. Although the fundus is usually normal, macular changes (which may show early signs of progression) and vessel narrowing may be present in some affected individuals. Defects in the macula are visible on optical coherence tomography. Diagnosis/testing The diagnosis of achromatopsia is established in a proband through clinical and family history, examination for nystagmus, visual acuity testing, color vision assessment, and fundoscopic examination. If achromatopsia is suspected, additional testing may include optical coherence tomography, fundus autofluorescence, visual fields, and electroretinogram. Identification of biallelic pathogenic (or likely pathogenic) variants in ATF6, CNGA3, CNGB3, GNAT2, PDE6C, or PDE6H confirms the clinical diagnosis. Author Affiliations: 1 Molecular Genetics Laboratory, Institute for Ophthalmic Research, University of Tbingen, Tbingen, Germany; Email: susanne.kohl@uni-tuebingen.de; Email: wissinger@uni-tuebingen.de. 2 Department of Ophthalmology, University of Regensburg, Regensburg, Germany; Email: herbert.jaegle@ukr.de. 3 Institute for Ophthalmic Research, University of Tbingen, Tbingen, Germany; Email: ditta.zobor@uni-tuebingen.de. Copyright 1993-2024, University of Washington, Seattle. GeneReviews is a registered trademark of the University of Washington, Seattle. All rights reserved. Management GeneReviews Treatment of manifestations: Dark or special filter glasses or red-tinted contact lenses to reduce photophobia and potentially improve visual acuity; low vision aids; preferential classroom seating for children; occupational aids. Surveillance: Ophthalmologic examination every six to 12 months for children and every two to three years for adults. Genetic counseling Achromatopsia is inherited in an autosomal recessive manner. At conception, each sib of an affected individual has a 25% chance of being affected, a 50% chance of being an asymptomatic carrier, and a 25% chance of being unaffected and not a carrier. Carrier testing for at-risk relatives, prenatal testing for pregnancies at increased risk, and preimplantation genetic testing are possible if the pathogenic variants have been identified in the family."
  }
]

# Target the index
dense_index = pc.Index(index_name)

# Upsert the records into a namespace
#dense_index.upsert_records("example-namespace", records)

# Wait for the upserted vectors to be indexed
import time
#time.sleep(10)

# View stats for the index
#stats = dense_index.describe_index_stats()
#print(stats)

# Define the query
query = "Famous historical structures and monuments"

# Search the dense index
# results = dense_index.search(
#     namespace="example-namespace",
#     query={
#         "top_k": 10,
#         "inputs": {
#             'text': query
#         }
#     }
# )

# Print the results
# for hit in results['result']['hits']:
#     print(f"id: {hit['_id']}, score: {round(hit['_score'], 2)}")

# Search the dense index and rerank results
# reranked_results = dense_index.search(
#     namespace="example-namespace",
#     query={
#         "top_k": 10,
#         "inputs": {
#             'text': query
#         }
#     },
#     rerank={
#         "model": "bge-reranker-v2-m3",
#         "top_n": 10,
#         "rank_fields": ["chunk_text"]
#     }   
# )

# # Print the reranked results
# for hit in reranked_results['result']['hits']:
#     print(f"id: {hit['_id']}, score: {round(hit['_score'], 2)}, text: {hit['fields']['chunk_text']}, category: {hit['fields']['category']}")

#pc.delete_index(index_name)
